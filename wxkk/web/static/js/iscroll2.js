(function(){var e=Math,t=function(e){return e>>0},n=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",i=/android/gi.test(navigator.appVersion),r=/iphone|ipad/gi.test(navigator.appVersion),o=/playbook/gi.test(navigator.appVersion),a=/hp-tablet/gi.test(navigator.appVersion),s="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,l="ontouchstart"in window&&!a,c=n+"Transform"in document.documentElement.style,u=r||o,f=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,17)}}(),m=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),p="onorientationchange"in window?"orientationchange":"resize",d=l?"touchstart":"mousedown",v=l?"touchmove":"mousemove",h=l?"touchend":"mouseup",g=l?"touchcancel":"mouseup",b="translate"+(s?"3d(":"("),y=s?",0)":")",w=function(e,t){var i=this,r=document,o;i.wrapper=typeof e=="object"?e:r.getElementById(e);i.wrapper.style.overflow="hidden";i.scroller=i.wrapper.children[0];i.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(o in t)i.options[o]=t[o];i.x=i.options.x;i.y=i.options.y;i.options.useTransform=c?i.options.useTransform:false;i.options.hScrollbar=i.options.hScroll&&i.options.hScrollbar;i.options.vScrollbar=i.options.vScroll&&i.options.vScrollbar;i.options.useTransition=u&&i.options.useTransition;i.scroller.style[n+"TransitionProperty"]=i.options.useTransform?"-"+n.toLowerCase()+"-transform":"top left";i.scroller.style[n+"TransitionDuration"]="0";i.scroller.style[n+"TransformOrigin"]="0 0";if(i.options.useTransition)i.scroller.style[n+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)";if(i.options.useTransform)i.scroller.style[n+"Transform"]=b+i.x+"px,"+i.y+"px"+y;else i.scroller.style.cssText+=";position:absolute;top:"+i.y+"px;left:"+i.x+"px";i.refresh();i._bind(p,window);i._bind(d);if(!l)i._bind("mouseout",i.wrapper)};w.prototype={enabled:true,x:0,y:0,steps:[],scale:1,handleEvent:function(e){var t=this;switch(e.type){case d:if(!l&&e.button!==0)return;t._start(e);break;case v:t._move(e);break;case h:case g:t._end(e);break;case p:t._resize();break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e);break}},_resize:function(){this.refresh()},_pos:function(e,i){e=this.hScroll?e:0;i=this.vScroll?i:0;if(this.options.useTransform){this.scroller.style[n+"Transform"]=b+e+"px,"+i+"px"+y+" scale("+this.scale+")"}else{e=t(e);i=t(i);this.scroller.style.left=e+"px";this.scroller.style.top=i+"px"}this.x=e;this.y=i},_start:function(e){var t=this,i=l?e.touches[0]:e,r,o,a;if(!t.enabled)return;if(t.options.onBeforeScrollStart)t.options.onBeforeScrollStart.call(t,e);if(t.options.useTransition)t._transitionTime(0);t.moved=false;t.animating=false;t.zoomed=false;t.distX=0;t.distY=0;t.absDistX=0;t.absDistY=0;t.dirX=0;t.dirY=0;if(t.options.momentum){if(t.options.useTransform){r=getComputedStyle(t.scroller,null)[n+"Transform"].replace(/[^0-9-.,]/g,"").split(",");o=r[4]*1;a=r[5]*1}else{o=getComputedStyle(t.scroller,null).left.replace(/[^0-9-]/g,"")*1;a=getComputedStyle(t.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(o!=t.x||a!=t.y){if(t.options.useTransition)t._unbind("webkitTransitionEnd");else m(t.aniTime);t.steps=[];t._pos(o,a)}}t.startX=t.x;t.startY=t.y;t.pointX=i.pageX;t.pointY=i.pageY;t.startTime=e.timeStamp||Date.now();if(t.options.onScrollStart)t.options.onScrollStart.call(t,e);t._bind(v);t._bind(h);t._bind(g)},_move:function(t){var n=this,i=l?t.touches[0]:t,r=i.pageX-n.pointX,o=i.pageY-n.pointY,a=n.x+r,s=n.y+o,c=t.timeStamp||Date.now();if(n.options.onBeforeScrollMove)n.options.onBeforeScrollMove.call(n,t);n.pointX=i.pageX;n.pointY=i.pageY;if(a>0||a<n.maxScrollX){a=n.options.bounce?n.x+r/2:a>=0||n.maxScrollX>=0?0:n.maxScrollX}if(s>0||s<n.maxScrollY){s=n.options.bounce?n.y+o/2:s>=0||n.maxScrollY>=0?0:n.maxScrollY}n.distX+=r;n.distY+=o;n.absDistX=e.abs(n.distX);n.absDistY=e.abs(n.distY);if(n.absDistX<6&&n.absDistY<6){return}if(n.options.lockDirection){if(n.absDistX>n.absDistY+5){s=n.y;o=0}else if(n.absDistY>n.absDistX+5){a=n.x;r=0}}n.moved=true;n._pos(a,s);n.dirX=r>0?-1:r<0?1:0;n.dirY=o>0?-1:o<0?1:0;if(c-n.startTime>300){n.startTime=c;n.startX=n.x;n.startY=n.y}if(n.options.onScrollMove)n.options.onScrollMove.call(n,t)},_end:function(n){if(l&&n.touches.length!=0)return;var i=this,r=l?n.changedTouches[0]:n,o,a,s={dist:0,time:0},c={dist:0,time:0},u=(n.timeStamp||Date.now())-i.startTime,f=i.x,m=i.y,p;i._unbind(v);i._unbind(h);i._unbind(g);if(i.options.onBeforeScrollEnd)i.options.onBeforeScrollEnd.call(i,n);if(!i.moved){if(l){o=r.target;while(o.nodeType!=1)o=o.parentNode;if(o.tagName!="SELECT"&&o.tagName!="INPUT"&&o.tagName!="TEXTAREA"){a=document.createEvent("MouseEvents");a.initMouseEvent("click",true,true,n.view,1,r.screenX,r.screenY,r.clientX,r.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null);a._fake=true;o.dispatchEvent(a)}}i._resetPos(200);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,n);return}if(u<300&&i.options.momentum){s=f?i._momentum(f-i.startX,u,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):s;c=m?i._momentum(m-i.startY,u,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y:0,i.options.bounce?i.wrapperH:0):c;f=i.x+s.dist;m=i.y+c.dist;if(i.x>0&&f>0||i.x<i.maxScrollX&&f<i.maxScrollX)s={dist:0,time:0};if(i.y>0&&m>0||i.y<i.maxScrollY&&m<i.maxScrollY)c={dist:0,time:0}}if(s.dist||c.dist){p=e.max(e.max(s.time,c.time),10);i.scrollTo(t(f),t(m),p);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,n);return}i._resetPos(200);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,n)},_resetPos:function(e){var t=this,n=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,i=t.y>=0||t.maxScrollY>0?0:t.y<t.maxScrollY?t.maxScrollY:t.y;if(n==t.x&&i==t.y){if(t.moved){if(t.options.onScrollEnd)t.options.onScrollEnd.call(t);t.moved=false}return}t.scrollTo(n,i,e||0)},_mouseout:function(e){var t=e.relatedTarget;if(!t){this._end(e);return}while(t=t.parentNode)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind("webkitTransitionEnd");t._startAni()},_startAni:function(){var t=this,n=t.x,i=t.y,r=Date.now(),o,a,s;if(t.animating)return;if(!t.steps.length){t._resetPos(400);return}o=t.steps.shift();if(o.x==n&&o.y==i)o.time=0;t.animating=true;t.moved=true;if(t.options.useTransition){t._transitionTime(o.time);t._pos(o.x,o.y);t.animating=false;if(o.time)t._bind("webkitTransitionEnd");else t._resetPos(0);return}s=function(){var l=Date.now(),c,u;if(l>=r+o.time){t._pos(o.x,o.y);t.animating=false;if(t.options.onAnimationEnd)t.options.onAnimationEnd.call(t);t._startAni();return}l=(l-r)/o.time-1;a=e.sqrt(1-l*l);c=(o.x-n)*a+n;u=(o.y-i)*a+i;t._pos(c,u);if(t.animating)t.aniTime=f(s)};s()},_transitionTime:function(e){this.scroller.style[n+"TransitionDuration"]=e+"ms"},_momentum:function(n,i,r,o,a){var s=6e-4,l=e.abs(n)/i,c=l*l/(2*s),u=0,f=0;if(n>0&&c>r){f=a/(6/(c/l*s));r=r+f;l=l*r/c;c=r}else if(n<0&&c>o){f=a/(6/(c/l*s));o=o+f;l=l*o/c;c=o}c=c*(n<0?-1:1);u=l/s;return{dist:c,time:t(u)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;n-=e.offsetTop}return{left:t,top:n}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[n+"Transform"]="";e._unbind(p,window);e._unbind(d);e._unbind(v);e._unbind(h);e._unbind(g);e._unbind("mouseout",e.wrapper);if(e.options.useTransition)e._unbind("webkitTransitionEnd");if(e.options.onDestroy)e.options.onDestroy.call(e)},refresh:function(){var e=this,t;e.wrapperW=e.wrapper.clientWidth;e.wrapperH=e.wrapper.clientHeight;e.scrollerW=e.scroller.offsetWidth;e.scrollerH=e.scroller.offsetHeight;e.maxScrollX=e.wrapperW-e.scrollerW;e.maxScrollY=e.wrapperH-e.scrollerH;e.dirX=0;e.dirY=0;e.hScroll=e.options.hScroll&&e.maxScrollX<0;e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH);t=e._offset(e.wrapper);e.wrapperOffsetLeft=-t.left;e.wrapperOffsetTop=-t.top;e.scroller.style[n+"TransitionDuration"]="0";e._resetPos(200)},scrollTo:function(e,t,n,i){var r=this,o=e,a,s;r.stop();if(!o.length)o=[{x:e,y:t,time:n,relative:i}];for(a=0,s=o.length;a<s;a++){if(o[a].relative){o[a].x=r.x-o[a].x;o[a].y=r.y-o[a].y}r.steps.push({x:o[a].x,y:o[a].y,time:o[a].time||0})}r._startAni()},scrollToElement:function(t,n){var i=this,r;t=t.nodeType?t:i.scroller.querySelector(t);if(!t)return;r=i._offset(t);r.left+=i.wrapperOffsetLeft;r.top+=i.wrapperOffsetTop;r.left=r.left>0?0:r.left<i.maxScrollX?i.maxScrollX:r.left;r.top=r.top>0?0:r.top<i.maxScrollY?i.maxScrollY:r.top;n=n===undefined?e.max(e.abs(r.left)*2,e.abs(r.top)*2):n;i.scrollTo(r.left,r.top,n)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(v);this._unbind(h);this._unbind(g)},enable:function(){this.enabled=true},stop:function(){m(this.aniTime);this.steps=[];this.moved=false;this.animating=false}};if(typeof exports!=="undefined")exports.iScroll=w;else window.iScroll=w})();KISSY.add("mui/lib/iscroll4/iscroll-lite",function(e){return window.iScroll},{});